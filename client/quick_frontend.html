<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        const url = "https://raw.githubusercontent.com/raaudain/devjobs/main/server/data/data.json";

        fetch(url)
            .then(res => res.json())
            .then(data => {
                let index = 0;
                
                const body = document.querySelector("body");
                const h1 = document.createElement("h1");
                const jobs = document.createElement("div");

                h1.textContent = "DevJobs";

                body.appendChild(h1);
                body.appendChild(jobs);

                while (index <= data.length) {
                    let jobInfo = data[index];

                    const job = document.createElement("div");
                    const date = document.createElement("span")
                    const title = document.createElement("span");
                    const company = document.createElement("span");
                    const location = document.createElement("span");
                    const linebreak = document.createElement("br");
                    const url = document.createElement("a");
                    const button = document.createElement("button");

                    jobs.className = "jobs";
                    job.className = "job";
                    title.id = "title";
                    company.id = "company";
                    location.id = "location";
                    url.id = "url";
                    url.href = jobInfo.url;
                    url.target = "_blank";
                    url.rel = "noopener noreferrer";

                    job.style.display = "flex";
                    job.style.flexDirection = "column";
                    button.style.width = "100px";
                    button.style.cursor = "pointer";
                    url.style.textDecoration = "none";
                    url.style.color = "inherit";
                    title.style.textDecoration = "bold";
                    title.style.fontSize = "20px";
                    date.style.color = "grey";
                    company.style.color = "grey";
                    location.style.color = "grey";

                    const d = new Date(jobInfo.timestamp * 1000);
                    date.textContent = `Date: ${d.toLocaleString()}`;
                    title.textContent = `Position: ${jobInfo.title}`;
                    company.textContent = `Company: ${jobInfo.company}`;
                    location.textContent = `Location: ${jobInfo.location}`;
                    url.textContent = "Apply"
                    

                    jobs.appendChild(job);
                    job.appendChild(title);
                    if (company.textContent != "None" || company.textContent != null) {
                        job.appendChild(company);
                    }
                    job.appendChild(date);
                    if (location.textContent != "None" || location.textContent != null) {
                        job.appendChild(location);
                    }
                    button.appendChild(url);
                    job.appendChild(button);
                    job.after(linebreak);

                    index++;
                }
            });        
    </script>
</body>
</html>